% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/RcppExports.R
\name{european_option_cf_2d}
\alias{european_option_cf_2d}
\title{European Option 2D (closed-form, ADR)}
\usage{
european_option_cf_2d(
  s_0,
  x_0,
  k,
  tau,
  r_d,
  r_f,
  q,
  sigma_s,
  sigma_x,
  rho,
  n,
  type
)
}
\arguments{
\item{s_0}{Stock spot price S(0).}

\item{x_0}{FX spot price X(0) (domestic per foreign).}

\item{k}{Strike price (domestic currency).}

\item{tau}{Time to expiry (in years, > 0).}

\item{r_d}{Risk-free rate (domestic).}

\item{r_f}{Risk-free rate (foreign) — kept for signature symmetry.}

\item{q}{Dividend yield for the equity.}

\item{sigma_s}{Constant volatility of the stock.}

\item{sigma_x}{Constant volatility of the FX.}

\item{rho}{Correlation between the stock and the FX in \verb{[-1, 1]}.}

\item{n}{ADR ratio (shares per ADR), usually >= 1.}

\item{type}{Either "call" or "put" (case-insensitive).}
}
\value{
Option price as a numeric scalar.
}
\description{
Closed-form Black–Scholes price for a European option on an ADR whose
underlying is the product S·X scaled by the ADR ratio n: ADR = (S·X)/n.
Assumes constant volatilities for S and X and correlation rho. The
effective ADR log-volatility is
sigma_adr = sqrt(sigma_s^2 + sigma_x^2 + 2 * rho * sigma_s * sigma_x).
}
\details{
The domestic-measure discounting is used: SX leg discounted by exp(-q * tau),
strike leg by exp(-r_d * tau). Note r_f does not enter the closed form directly
but is kept for API symmetry with PDE solvers.

This is the standard Black–Scholes formula applied to ADR = (S·X)/n with
log-normal dynamics under the domestic measure. Let ADR_0 = (s_0 * x_0)/n and
sigma_adr as above. Then
\verb{d1 = [ln(ADR_0 / K) + (r_d - q + 0.5 * sigma_adr^2) * tau] / (sigma_adr * sqrt(tau))},
\code{d2 = d1 - sigma_adr * sqrt(tau)}.
The call is ADR_0 \verb{e^\{-q tau\} N(d1) - K e^\{-r_d tau\} N(d2)}; the put uses put-call parity.
}
\examples{
european_option_cf_2d(100, 20, 2000, 1, 0.05, 0.02, 0.01, 0.2, 0.1, 0.3, 1, "call")

}
